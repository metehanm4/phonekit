<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: logging/logger.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: logging/logger.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* global __DEV__, __LOG_MODE__ */

/**
 * Console-like logger with levels + two modes:
 *  - dev: human-readable + callsite (trace)
 *  - prod: JSON (parsable), no callsite
 */
export class Logger {
  constructor(level = 'info', mode) {
    this.level = level;
    this._levels = ['trace', 'debug', 'info', 'warn', 'error'];
    // Default from build-time flags, runtime override allowed
    this.mode = mode || (typeof __LOG_MODE__ !== 'undefined' ? __LOG_MODE__ : 'human');
    this.isDev = typeof __DEV__ !== 'undefined' ? __DEV__ : true;
  }

  _canLog(l) {
    return this._levels.indexOf(l) >= this._levels.indexOf(this.level);
  }

  _emit(level, parts) {
    const ts = new Date().toISOString();

    if (this.mode === 'json') {
      // Production-friendly JSON logging
      // eslint-disable-next-line no-console
      console.log(JSON.stringify({
        ts,
        level,
        message: parts.map(String).join(' ')
      }));
      return;
    }

    // Human-readable mode
    const header = `[${ts}] [${level.toUpperCase()}]`;

    if (this.isDev) {
      // Group logs and show clickable callsite
      // eslint-disable-next-line no-console
      console.groupCollapsed(header, ...parts);
      // eslint-disable-next-line no-console
      console.trace();
      // eslint-disable-next-line no-console
      console.groupEnd();
    } else {
      const fn = level === 'warn'
        ? 'warn'
        : level === 'error'
          ? 'error'
          : level === 'debug'
            ? 'debug'
            : 'log';
      // eslint-disable-next-line no-console
      console[fn](header, ...parts);
    }
  }

  trace(...a) { if (this._canLog('trace')) this._emit('trace', a); }
  debug(...a) { if (this._canLog('debug')) this._emit('debug', a); }
  info(...a) { if (this._canLog('info')) this._emit('info', a); }
  warn(...a) { if (this._canLog('warn')) this._emit('warn', a); }
  error(...a) { if (this._canLog('error')) this._emit('error', a); }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Logger.html">Logger</a></li><li><a href="module.exports.html">exports</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Aug 12 2025 19:23:56 GMT+0300 (GMT+03:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
